{% extends "base.html" %}
{% load static %}

{% block content %}
<h2 class="mb-4">Mi Carrito 🛒</h2>

{% if cart_items or products %}
<div class="row">
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Producto</th>
        <th>Cantidad</th>
        <th>Precio</th>
        <th>Subtotal</th>
      </tr>
    </thead>
    <tbody>
      {% if request.user.is_authenticated %}
        {% for item in cart_items %}
        <tr>
          <td>{{ item.product.title }}</td>
          <td>{{ item.quantity }}</td>
          <td>${{ item.product.price|floatformat:2 }}</td>
          <td>${{ item.product.price|mul:item.quantity|floatformat:2 }}</td>
        </tr>
        {% endfor %}
      {% else %}
        {% for product in products %}
        <tr>
          <td>{{ product.title }}</td>
          <td>1</td>
          <td>${{ product.price|floatformat:2 }}</td>
          <td>${{ product.price|floatformat:2 }}</td>
        </tr>
        {% endfor %}
      {% endif %}
    </tbody>
  </table>

  <h4 class="mt-3">Total: <strong>${{ total|floatformat:2 }}</strong></h4>

  <a href="#" class="btn btn-success mt-3">Finalizar compra ✅</a>
  <a href="#" class="btn btn-danger mt-3">Vaciar carrito 🗑️</a>
</div>
{% else %}
<p>No tienes productos en tu carrito 😔</p>
{% endif %}

{% endblock %}

{% block extra_js %}
{% endblock %}